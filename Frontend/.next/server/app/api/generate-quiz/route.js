(()=>{var e={};e.id=759,e.ids=[759],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},85068:(e,t,o)=>{"use strict";o.r(t),o.d(t,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>d,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>u});var n={};o.r(n),o.d(n,{POST:()=>c});var r=o(96559),a=o(48088),s=o(37719),i=o(32190);async function c(e){try{let t;console.log("Quiz generation request received");let{category:o="Technology",difficulty:n="medium",questionCount:r=10,timePerQuestion:a=10,seed:s}=await e.json();console.log("Quiz generation params:",{category:o,difficulty:n,questionCount:r,timePerQuestion:a,seed:s});let c=`Generate exactly ${r} ${n} multiple-choice quiz questions about ${o}.
Return STRICT JSON ONLY with NO prose, NO markdown, NO code fences.
Ensure questions are diverse and non-repetitive. Vary phrasing, subtopics, and difficulty within the band.
Return a JSON array of ${r} objects, each with this schema:
{
  "question": string,
  "options": [string, string, string, string],
  "answer": string,
  "explanation": string
}`,p=process.env.OPENAI_API_KEY,l=async e=>{if(!p)return console.log("No OpenAI API key found, will use fallback questions"),{ok:!1,status:0,content:""};console.log(`Calling OpenAI API with model: ${e}`);let t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({model:e,messages:[{role:"user",content:c}],max_tokens:2048,temperature:.3})});if(!t.ok){let e;try{e=await t.json()}catch{}return console.error("OpenAI API error:",t.status,e||await t.text?.()),{ok:!1,status:t.status,content:""}}let o=await t.json(),n=o.choices?.[0]?.message?.content??"";return console.log(`OpenAI API success with model: ${e}, content length: ${n.length}`),{ok:!0,status:200,content:n}},u=await l("gpt-3.5-turbo");u.ok&&u.content||(u=await l("gpt-4")),u.ok&&u.content||(u=await l("gpt-3.5-turbo-16k"));let d=u.content||"";console.log("OpenAI response content length:",d.length);try{let e=d?.match(/```(?:json)?\n([\s\S]*?)```/i),o=e?e[1]:d;console.log("Attempting to parse JSON:",o.substring(0,200)+"..."),t=JSON.parse(o),console.log("Successfully parsed JSON, type:",Array.isArray(t)?"array":typeof t)}catch(e){console.log("JSON parsing failed, using fallback:",e),t={question:"Failed to generate question.",options:["A","B","C","D"],answer:"A",explanation:'The correct answer is "A".'}}let g=(e=>{let t=(e,t)=>{let o=e.findIndex(e=>e.trim().toLowerCase()===String(t||"").trim().toLowerCase());return o>=0?o:0},o=e=>{let o=Array.isArray(e?.options)?e.options.slice(0,4):[],n=t(o,e?.answer),r=o[n]?`The correct answer is "${o[n]}".`:"The provided answer matches the first option.";return{id:globalThis.crypto?.randomUUID?.()??Math.random().toString(36).slice(2),question:String(e?.question??"Failed to generate question."),options:o,correctAnswer:n,timeLimit:Number(a)||10,explanation:String(e?.explanation??r)}};return Array.isArray(e)?e.map(o):[o(e)]})(t);console.log("Generated questions count:",g.length);let h=(e=>{if(!e)return()=>Math.random();let t=0x811c9dc5;for(let o=0;o<e.length;o++)t^=e.charCodeAt(o),t=Math.imul(t,0x1000193);let o=t||0x75bcd15;return()=>(o^=o<<13,o^=o>>>17,((o^=o<<5)>>>0)%1e6/1e6)})(s),m=e=>{for(let t=e.length-1;t>0;t--){let o=Math.floor(h()*(t+1)),n=e[t];e[t]=e[o],e[o]=n}return e},S=e=>{let t=new Set,o=[];for(let n of e){let e=n.question.trim().toLowerCase();if(t.has(e))continue;t.add(e);let r=n.options[n.correctAnswer],a=m([...n.options]),s=Math.max(0,a.findIndex(e=>e===r));o.push({...n,options:a,correctAnswer:s})}return o};g=S(g),(!u.ok||!g.length||g.every(e=>!e.question||e.options.length<2)||g.some(e=>String(e.question).toLowerCase().includes("failed to generate question"))||g.length<Number(r))&&(console.log("Using local fallback questions"),g=((e,t)=>{let o=[{question:`${e}: What does CPU stand for?`,options:["Central Processing Unit","Computer Personal Unit","Central Peripheral Unit","Compute Process Utility"],correctAnswer:0,explanation:'CPU stands for "Central Processing Unit".'},{question:`${e}: Which language runs in a web browser?`,options:["Java","C","Python","JavaScript"],correctAnswer:3,explanation:"JavaScript is the language that runs in the browser."},{question:`${e}: What is the value of 2^5?`,options:["16","32","64","8"],correctAnswer:1,explanation:"2^5 equals 32."},{question:`${e}: HTTP status 404 means?`,options:["Server Error","Unauthorized","Not Found","Forbidden"],correctAnswer:2,explanation:"404 indicates the requested resource was not found."},{question:`${e}: Which is a NoSQL database?`,options:["MySQL","MongoDB","PostgreSQL","SQLite"],correctAnswer:1,explanation:"MongoDB is a NoSQL document database."},{question:`${e}: What does RAM stand for?`,options:["Random Access Memory","Rapid Access Memory","Readily Available Memory","Runtime Active Memory"],correctAnswer:0,explanation:'RAM stands for "Random Access Memory".'},{question:`${e}: What is Git used for?`,options:["Text editing","Version control","Image processing","Virtualization"],correctAnswer:1,explanation:"Git is a distributed version control system."},{question:`${e}: CSS stands for?`,options:["Colorful Style Sheets","Cascading Style Sheets","Computer Style Sheets","Creative Style System"],correctAnswer:1,explanation:'CSS stands for "Cascading Style Sheets".'},{question:`${e}: Which company developed TypeScript?`,options:["Google","Facebook","Microsoft","Amazon"],correctAnswer:2,explanation:"TypeScript was developed by Microsoft."},{question:`${e}: Which framework is for React routing?`,options:["Vuex","Next.js","Laravel","Django"],correctAnswer:1,explanation:"Next.js is a React framework that includes routing."},{question:`${e}: What does API stand for?`,options:["Application Programming Interface","Advanced Programming Interface","Automated Programming Interface","Application Process Integration"],correctAnswer:0,explanation:'API stands for "Application Programming Interface".'},{question:`${e}: Which is a frontend framework?`,options:["Express.js","Django","React","Flask"],correctAnswer:2,explanation:"React is a frontend JavaScript framework."},{question:`${e}: What is Docker used for?`,options:["Database management","Containerization","Version control","Web hosting"],correctAnswer:1,explanation:"Docker is used for containerization of applications."},{question:`${e}: Which is a cloud provider?`,options:["GitHub","AWS","Docker","Nginx"],correctAnswer:1,explanation:"AWS (Amazon Web Services) is a major cloud provider."},{question:`${e}: What does SQL stand for?`,options:["Structured Query Language","Simple Query Language","Standard Query Language","System Query Language"],correctAnswer:0,explanation:'SQL stands for "Structured Query Language".'},{question:`${e}: Which is a JavaScript runtime?`,options:["Python","Node.js","Java","C++"],correctAnswer:1,explanation:"Node.js is a JavaScript runtime environment."},{question:`${e}: What is the purpose of HTML?`,options:["Styling","Structure","Logic","Database"],correctAnswer:1,explanation:"HTML is used to structure web page content."},{question:`${e}: Which is a version control system?`,options:["Git","MySQL","Apache","Nginx"],correctAnswer:0,explanation:"Git is a distributed version control system."},{question:`${e}: What does URL stand for?`,options:["Uniform Resource Locator","Universal Resource Locator","Unified Resource Locator","Unique Resource Locator"],correctAnswer:0,explanation:'URL stands for "Uniform Resource Locator".'},{question:`${e}: Which is a CSS preprocessor?`,options:["SASS","HTML","JavaScript","Python"],correctAnswer:0,explanation:"SASS is a CSS preprocessor that extends CSS functionality."},{question:`${e}: What is the purpose of a CDN?`,options:["Code development","Content delivery","Database management","User authentication"],correctAnswer:1,explanation:"CDN (Content Delivery Network) is used for faster content delivery."},{question:`${e}: Which is a testing framework?`,options:["Jest","Express","MongoDB","Apache"],correctAnswer:0,explanation:"Jest is a popular JavaScript testing framework."},{question:`${e}: What does REST stand for?`,options:["Representational State Transfer","Remote State Transfer","Resource State Transfer","Rapid State Transfer"],correctAnswer:0,explanation:'REST stands for "Representational State Transfer".'},{question:`${e}: Which is a package manager?`,options:["npm","HTML","CSS","SQL"],correctAnswer:0,explanation:"npm is a package manager for JavaScript."},{question:`${e}: What is the purpose of HTTPS?`,options:["Faster loading","Security","Styling","Database"],correctAnswer:1,explanation:"HTTPS provides secure communication over HTTP."},{question:`${e}: Which is a database?`,options:["React","PostgreSQL","Express","Node.js"],correctAnswer:1,explanation:"PostgreSQL is a relational database management system."},{question:`${e}: What does JSON stand for?`,options:["JavaScript Object Notation","Java Standard Object Notation","JavaScript Online Notation","Java Script Object Network"],correctAnswer:0,explanation:'JSON stands for "JavaScript Object Notation".'},{question:`${e}: Which is a web server?`,options:["Apache","React","MongoDB","Express"],correctAnswer:0,explanation:"Apache is a popular web server software."},{question:`${e}: What is the purpose of caching?`,options:["Security","Performance","Styling","Database"],correctAnswer:1,explanation:"Caching improves performance by storing frequently accessed data."},{question:`${e}: Which is a design pattern?`,options:["MVC","HTML","CSS","JavaScript"],correctAnswer:0,explanation:"MVC (Model-View-Controller) is a software design pattern."}],n=[],r=[...o.keys()],i=s?m(r):r;for(let e=0;e<Math.min(t,i.length);e++){let t=o[i[e]],r=[...t.options];for(let e=r.length-1;e>0;e--){let t=Math.floor(h()*(e+1)),o=r[e];r[e]=r[t],r[t]=o}let c=Math.max(0,r.findIndex(e=>e===t.options[t.correctAnswer]));n.push({id:s?`${s}-${e}`:Math.random().toString(36).slice(2),question:t.question,options:r,correctAnswer:c,timeLimit:Number(a)||10,explanation:t.explanation})}return n})(o,Number(r)||10),g=S(g),console.log("Local fallback questions generated:",g.length));let f={success:!0,quiz:{id:globalThis.crypto?.randomUUID?.()??Math.random().toString(36).slice(2),category:o,timePerQuestion:Number(a)||10,questions:g}};return console.log("Final response payload:",{success:f.success,questionCount:f.quiz.questions.length,debug:f.debug}),i.NextResponse.json(f)}catch(e){return console.error("Error generating quiz:",e),i.NextResponse.json({error:"Failed to generate quiz"},{status:500})}}let p=new r.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/generate-quiz/route",pathname:"/api/generate-quiz",filename:"route",bundlePath:"app/api/generate-quiz/route"},resolvedPagePath:"/Users/vikashyadav/Developer/AllgitFiles/QuizCraft/Frontend/app/api/generate-quiz/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:l,workUnitAsyncStorage:u,serverHooks:d}=p;function g(){return(0,s.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:u})}},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),n=t.X(0,[828,580],()=>o(85068));module.exports=n})();