(()=>{var e={};e.id=112,e.ids=[112],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30116:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>x,routeModule:()=>d,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var r={};s.r(r),s.d(r,{GET:()=>p,POST:()=>c});var a=s(96559),n=s(48088),o=s(37719),i=s(32190);let u=new Map;async function c(e){try{let{lobbyId:t,action:s}=await e.json();if(!t)return i.NextResponse.json({error:"Missing lobbyId"},{status:400});let r=Date.now();switch(s){case"start_game":let a=r+1e4;return u.set(t,a),console.log(`Game start time set for lobby ${t}:`,new Date(a)),i.NextResponse.json({success:!0,gameStartTime:a,countdown:10,message:"Game start time synchronized"});case"get_game_start":let n=u.get(t);if(!n)return i.NextResponse.json({success:!1,message:"Game not started yet"});let o=Math.max(0,n-r),c=Math.ceil(o/1e3);return i.NextResponse.json({success:!0,gameStartTime:n,timeUntilStart:o,countdown:c,hasStarted:o<=0});case"clear_game":return u.delete(t),i.NextResponse.json({success:!0,message:"Game cleared"});default:return i.NextResponse.json({error:"Invalid action"},{status:400})}}catch(e){return console.error("Game sync error:",e),i.NextResponse.json({error:"Unexpected error",details:e.message},{status:500})}}async function p(e){try{let{searchParams:t}=new URL(e.url),s=t.get("lobbyId");if(!s)return i.NextResponse.json({error:"Missing lobbyId"},{status:400});let r=u.get(s);if(!r)return i.NextResponse.json({success:!1,message:"Game not started yet"});let a=Date.now(),n=Math.max(0,r-a),o=Math.ceil(n/1e3);return i.NextResponse.json({success:!0,gameStartTime:r,timeUntilStart:n,countdown:o,hasStarted:n<=0})}catch(e){return console.error("Game sync GET error:",e),i.NextResponse.json({error:"Unexpected error",details:e.message},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/game-sync/route",pathname:"/api/game-sync",filename:"route",bundlePath:"app/api/game-sync/route"},resolvedPagePath:"/Users/vikashyadav/Developer/AllgitFiles/QuizCraft/Frontend/app/api/game-sync/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:g}=d;function x(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[828,580],()=>s(30116));module.exports=r})();